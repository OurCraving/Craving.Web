<div data-ng-controller="ProfileUpdatePasswordController as vm">
    <md-toolbar>
        <div class="md-toolbar-tools">
            <md-button ng-click="vm.toggleSidenav('left')" hide-gt-md aria-label="Menu">
                <ng-md-icon icon="menu"></ng-md-icon>
            </md-button>
            <h3>
                {{vm.title}}
            </h3>
            <span flex></span>
        </div>
    </md-toolbar>

    <md-toolbar ng-show="vm.message!=''" ng-class="vm.savedSuccessfully? 'md-success': 'md-warn'">
        <div class="md-toolbar-tools">
            <h5 class="md-flex">{{vm.message}}</h5>
        </div>
    </md-toolbar>

    <md-content flex md-scroll-y>
        <ui-view layout="column" layout-fill layout-padding>
            <div class="inset" hide-sm></div>

            <div layout="row" layout-align="center center">
                <md-card flex-gt-sm="90" flex-gt-md="80" flex="95">
                    <md-card-content>
                        <form name="updatePasswordForm">
                            <div layout="column">
                                <md-input-container flex>
                                    <label>Current Password:</label>
                                    <input type="password" minlength="6" name="currentPassword" required ng-model="vm.data.currentPassword" autofocus
                                           ui-keypress="{enter:'vm.submit($event)'}">
                                    <div ng-messages="updatePasswordForm.currentPassword.$error">
                                        <div ng-message="required">required.</div>
                                        <div ng-message="minlength">too short.</div>
                                    </div>
                                </md-input-container>
                                <md-input-container flex>
                                    <label>New Password</label>
                                    <input type="password" name="password" minlength="6" required ng-model="vm.data.newPassword" ui-keypress="{enter:'vm.submit($event)'}">
                                    <div ng-messages="updatePasswordForm.password.$error">
                                        <div ng-message="required">required.</div>
                                        <div ng-message="minlength">too short.</div>
                                    </div>
                                </md-input-container>
                                <md-input-container flex>
                                    <label>Repeat New Password</label>
                                    <input type="password" name="confirmPassword" required ng-model="vm.data.newConfirmPassword" ui-keypress="{enter:'vm.submit($event)'}"
                                           compare-to="vm.data.newPassword">
                                    <div ng-messages="updatePasswordForm.confirmPassword.$error">
                                        <div ng-message="required">required.</div>
                                        <div ng-message="compareTo">not equal to the password</div>
                                    </div>
                                </md-input-container>
                            </div>
                            <div class="md-actions" layout="row">
                                <span flex></span>
                                <!--<md-button click="history.back();"> Cancel </md-button>-->
                                <md-button ng-click="vm.submit($event);" class="md-primary md-raised">
                                    <ng-md-icon icon="save"></ng-md-icon> Save
                                </md-button>
                            </div>
                        </form>
                    </md-card-content>
                </md-card>
            </div>
        </ui-view>
    </md-content>
</div>